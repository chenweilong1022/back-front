(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-40ea"],{FkFC:function(t,e,n){"use strict";n.r(e);var i=n("bS4n"),o=n.n(i),s=n("6ZY3"),a=n.n(s),l=n("omC7"),r=n.n(l),c=n("WB0X"),u=n.n(c);n("yL8A"),n("N71Y"),n("XVbS"),n("tti0"),n("sSJA"),n("7HB/");n("VIyY");var f={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(t){t!==this.jsonEditor.getValue()&&this.jsonEditor.setValue(r()(this.value,null,2))}},mounted:function(){var t=this;this.jsonEditor=u.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(r()(this.value,null,2)),this.jsonEditor.on("change",function(e){t.$emit("changed",e.getValue()),t.$emit("input",e.getValue())})},methods:{getValue:function(){return this.jsonEditor.getValue()}}},g=(n("L7NE"),n("ZrdR")),d=Object(g.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-editor"},[e("textarea",{ref:"textarea"})])},[],!1,null,"51afe058",null);d.options.__file="index.vue";var m={name:"SysConfigs",components:{JsonEditor:d.exports},filters:{dialogTitle:function(t){return t?"创建配置项":"编辑配置项"}},data:function(){return{filterForm:{pageNo:1,pageSize:10},list:null,listLoading:!1,listTotal:0,configs:{code:null,title:null,note:null,content:{}},configsRules:{code:[{required:!0,trigger:"blur",message:"必填项"}],title:[{required:!0,trigger:"blur",message:"必填项"}]},dialogNewOrEditVisible:!1,newFlag:!0,saveBtnLoading:!1}},mounted:function(){this.query()},methods:{query:function(){var t=this;this.listLoading=!0,this.$store.dispatch("ListSysConfigsByQry",this.filterForm).then(function(e){t.list=e.data,t.listTotal=e.totalCount,t.listLoading=!1}).catch(function(){t.listLoading=!1})},showNewPage:function(){this.newFlag=!0,this.resetForm(),this.configs.content={},this.dialogNewOrEditVisible=!0},showEditPage:function(t){this.newFlag=!1,this.configs=a()({},t,{content:JSON.parse(t.content)}),this.dialogNewOrEditVisible=!0},saveConfigs:function(){var t=this;this.$refs.configsForm.validate(function(e){e&&t.$confirm("是否确定保存?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.saveBtnLoading=!0,t.$store.dispatch(t.newFlag?"SaveSysConfigs":"UpdateSysConfig",t.configs).then(function(e){t.saveBtnLoading=!1,t.dialogNewOrEditVisible=!1,t.$message({message:e.msg,type:"success"}),t.query()}).catch(function(){t.saveBtnLoading=!1})})})},removeData:function(t){var e=this;this.$confirm("是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.listLoading=!0,e.$store.dispatch("UpdateSysConfig",o()({},t,{isDel:1})).then(function(t){e.$message({message:t.msg,type:"success"}),e.listLoading=!1,e.query()}).catch(function(){e.listLoading=!1})})},formatJson:function(){this.configs.content=JSON.parse(this.configs.content)},resetForm:function(){this.$refs.configsForm&&this.$refs.configsForm.resetFields()},handleSizeChange:function(t){this.filterForm.pageSize=t,this.query()},handleCurrentChange:function(t){this.filterForm.pageNo=t,this.query()}}},p=(n("zDiz"),Object(g.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-form",{ref:"filterForm",attrs:{inline:!0,size:"mini"}},[n("el-form-item",[n("el-button",{staticClass:"btn-form",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.query}},[t._v("刷新")]),t._v(" "),n("el-button",{staticClass:"btn-form",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.showNewPage}},[t._v("新加配置项")]),t._v(" "),n("label",{staticStyle:{"margin-left":"10px"}},[t._v("注：需要修改参数时请联系技术人员协助！")])],1)],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,size:"mini",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"配置项ID",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"配置项代码",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.code)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"配置项名称",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.title)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"配置项说明"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.note)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"管理操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{icon:"el-icon-edit",type:"text",size:"mini"},on:{click:function(n){t.showEditPage(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{staticStyle:{color:"red"},attrs:{icon:"el-icon-delete",type:"text",size:"mini"},on:{click:function(n){t.removeData(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{"current-page":t.filterForm.pageNo,"page-sizes":[10,20,30,50],"page-size":t.filterForm.pageSize,total:t.listTotal,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.$set(t.filterForm,"pageNo",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogNewOrEditVisible,title:t._f("dialogTitle")(t.newFlag),width:"600px"},on:{"update:visible":function(e){t.dialogNewOrEditVisible=e}}},[n("el-form",{ref:"configsForm",attrs:{model:t.configs,rules:t.configsRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"配置项代码",prop:"code"}},[t.newFlag?t._e():n("el-tag",[t._v(t._s(t.configs.code))]),t._v(" "),t.newFlag?n("el-input",{model:{value:t.configs.code,callback:function(e){t.$set(t.configs,"code",e)},expression:"configs.code"}}):t._e()],1),t._v(" "),n("el-form-item",{attrs:{label:"配置项名称",prop:"title"}},[n("el-input",{model:{value:t.configs.title,callback:function(e){t.$set(t.configs,"title",e)},expression:"configs.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"配置项说明",prop:"note"}},[n("el-input",{attrs:{row:4,type:"textarea"},model:{value:t.configs.note,callback:function(e){t.$set(t.configs,"note",e)},expression:"configs.note"}})],1)],1),t._v(" "),n("h2",[t._v("配置项设置")]),t._v(" "),n("json-editor",{ref:"jsonEditor",model:{value:t.configs.content,callback:function(e){t.$set(t.configs,"content",e)},expression:"configs.content"}}),t._v(" "),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",size:"mini"},on:{click:t.formatJson}},[n("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"jsonFormat"}}),t._v("格式化")],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(e){t.dialogNewOrEditVisible=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.saveBtnLoading,type:"primary"},on:{click:t.saveConfigs}},[n("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"save"}}),t._v("保存")],1)],1)],1)],1)},[],!1,null,"7cd03a89",null));p.options.__file="index.vue";e.default=p.exports},L7NE:function(t,e,n){"use strict";var i=n("rNvU");n.n(i).a},Sroc:function(t,e,n){},rNvU:function(t,e,n){},zDiz:function(t,e,n){"use strict";var i=n("Sroc");n.n(i).a}}]);