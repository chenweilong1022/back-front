(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-59b2"],{Y3eG:function(e,t,r){},ZvS6:function(e,t,r){"use strict";var i=r("Y3eG");r.n(i).a},fpSf:function(e,t,r){"use strict";r.r(t);var i=r("7Qib"),n={name:"GameWinningDetail",filters:{moneyFilter:function(e){return e?(e/100).toFixed(2):0}},data:function(){return{filterForm:{showId:null,gameIds:[],startTime:Object(i.d)(0),endTime:Object(i.a)(0)},games:[],filterRules:{playerId:[{required:!0,trigger:"blur",validator:function(e,t,r){t&&0!==t.length&&!/^\d{1,}$/.test(t)?r(new Error("必须为纯数字")):r()}}],startTime:[{required:!0,trigger:"blur",message:"必填项"}],endTime:[{required:!0,trigger:"blur",message:"必填项"}]},list:null,listLoading:!1,listTotal:10}},mounted:function(){this.queryGames(),this.loadPageData()},methods:{queryGames:function(){var e=this;this.$store.dispatch("ListAllGame").then(function(t){e.games=t.data})},loadPageData:function(){var e=this;this.listLoading=!0,this.$store.dispatch("ListGameWinningDetailByQry",this.filterForm).then(function(t){e.list=t.data,e.listTotal=t.totalCount,e.listLoading=!1}).catch(function(){e.listLoading=!1})},query:function(){var e=this;this.$refs.filterForm.validate(function(t){t&&e.loadPageData()})},handleClick:function(e){var t={roomId:e.roomId,showId:this.filterForm.showId,startTime:this.filterForm.startTime,endTime:this.filterForm.endTime};this.$router.push({path:"/player/winningDetail",query:t})},getSummaries:function(e){var t=e.columns,r=e.data,i=[];return t.forEach(function(e,t){if(0!==t){if(1===t){var n=r.map(function(t){return Number(t[e.property])});n.every(function(e){return isNaN(e)})?i[t]="NaN":i[t]=n.reduce(function(e,t){var r=Number(t);return isNaN(r)?e:e+t},0)}if(t>1){var a=r.map(function(t){return Number(t[e.property])});a.every(function(e){return isNaN(e)})?i[t]="NaN":(i[t]=a.reduce(function(e,t){var r=Number(t);return isNaN(r)?e:e+r},0),i[t]=(i[t]/100).toFixed(2)+" 元")}}else i[t]="总计"}),i},handleSizeChange:function(e){this.filterForm.pageSize=e,this.query()},handleCurrentChange:function(e){this.filterForm.pageNo=e,this.query()}}},a=(r("ZvS6"),r("ZrdR")),o=Object(a.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-form",{ref:"filterForm",attrs:{inline:!0,model:e.filterForm,rules:e.filterRules,size:"mini"}},[r("el-form-item",{attrs:{label:"玩家ID",prop:"showId"}},[r("el-input",{model:{value:e.filterForm.showId,callback:function(t){e.$set(e.filterForm,"showId",t)},expression:"filterForm.showId"}})],1),e._v(" "),r("el-form-item",[r("el-col",{attrs:{xs:24,md:24,lg:12}},[r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"起始时间"}},[r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.filterForm.startTime,callback:function(t){e.$set(e.filterForm,"startTime",t)},expression:"filterForm.startTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{xs:24,md:24,lg:12}},[r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"结束时间"}},[r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.filterForm.endTime,callback:function(t){e.$set(e.filterForm,"endTime",t)},expression:"filterForm.endTime"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"筛选游戏"}},[r("el-checkbox-group",{model:{value:e.filterForm.gameIds,callback:function(t){e.$set(e.filterForm,"gameIds",t)},expression:"filterForm.gameIds"}},e._l(e.games,function(t){return r("el-checkbox",{key:t.gameid,staticStyle:{"margin-left":"5px"},attrs:{label:t.gameid}},[e._v(e._s(t.gameName))])}))],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"btn-form",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"summary-method":e.getSummaries,"show-summary":"",size:"mini",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",label:"游戏名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.gameName)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"游戏人数",prop:"gamePersonCount"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticStyle:{"text-decoration":"underline","font-style":"normal","font-weight":"bold"}},[e._v(e._s(t.row.gamePersonCount))]),e._v(" "),0!==t.row.gamePersonCount?r("el-button",{attrs:{type:"text",icon:"el-icon-sort-down"},on:{click:function(r){e.handleClick(t.row)}}}):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"流水量",prop:"flowVolume"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("moneyFilter")(t.row.flowVolume))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"税收总和",prop:"totalTax"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("moneyFilter")(t.row.totalTax))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"游戏输赢",prop:"winningMoney"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("label",{style:t.row.winningMoney>0?"color:red;":"color:green;"},[e._v(e._s(e._f("moneyFilter")(t.row.winningMoney)))])]}}])})],1)],1)},[],!1,null,"ca766c9e",null);o.options.__file="index.vue";t.default=o.exports}}]);