(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5c43"],{ZtuT:function(t,e,o){},dv6f:function(t,e,o){"use strict";var a=o("ZtuT");o.n(a).a},xwR7:function(t,e,o){"use strict";o.r(e);var a={name:"OnlinePlayerListPage",filters:{moneyFilter:function(t){return t?t/100:0}},data:function(){return{filterForm:{showId:null,gameId:0,pageNo:1,pageSize:10},games:[],list:null,listLoading:!1,listTotal:10,dialogNewOrEditVisible:!1,formData:{},controlGames:[127,151,152],dialogRules:{luckyRatio:[{required:!0,trigger:"blur",validator:function(t,e,o){0===e||e&&0!==e.length?isNaN(Number(e))?o(new Error("必须为纯数字")):o():o(new Error("必填项"))}}]},saveBtnLoading:!1}},created:function(){this.queryGames(),this.query()},methods:{queryGames:function(){var t=this;this.$store.dispatch("ListGamesAndOnlineCount").then(function(e){t.games=e.data})},query:function(){var t=this;this.listLoading=!0,this.$store.dispatch("ListOnlinePlayerQry",this.filterForm).then(function(e){t.list=e.data,t.listTotal=e.totalCount,t.listLoading=!1}).catch(function(){t.listLoading=!1})},changeBtnValue:function(t){this.filterForm.gameId=t,this.query()},changeRatio:function(t){this.dialogNewOrEditVisible=!0,this.formData={userid:t.userid,room:t.room,luckyRatio:t.luckyRatio}},saveData:function(){var t=this;this.$refs.dialogForm.validate(function(e){e&&(127!==Math.floor(t.formData.room/100)&&t.controlGames.some(function(e){return Math.floor(t.formData.room/100)===e})&&t.list.forEach(function(e){if(e.room===t.formData.room&&0===e.luckyRatio)return t.$message({type:"error",message:"必杀只能设置一个人"}),!1}),t.saveBtnLoading=!0,t.$store.dispatch("UpdatePlayerLuckyRatio",t.formData).then(function(e){t.$message({type:"success",message:e.msg}),t.saveBtnLoading=!1,t.dialogNewOrEditVisible=!1,t.query()}).catch(function(){t.saveBtnLoading=!1}))})},handleClick:function(t){var e=this.$store.state.user.roleId,o=this.$store.state.user.menus;1!==e?this.hasPermission(o,20101)&&this.$router.push({path:"/player/playerInfo",query:{playerId:t}}):this.$router.push({path:"/player/playerInfo",query:{playerId:t}})},handleSizeChange:function(t){this.filterForm.pageSize=t,this.query()},handleCurrentChange:function(t){this.filterForm.pageNo=t,this.query()}}},l=(o("dv6f"),o("ZrdR")),r=Object(l.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"filter-container"},[o("el-form",{ref:"filterForm",attrs:{inline:!0,model:t.filterForm,size:"mini"}},[o("el-form-item",{attrs:{label:"玩家ID"}},[o("el-input",{model:{value:t.filterForm.showId,callback:function(e){t.$set(t.filterForm,"showId",e)},expression:"filterForm.showId"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"筛选游戏"}},[o("el-button-group",[o("el-button",{attrs:{type:0===t.filterForm.gameId?"primary":""},on:{click:function(e){t.changeBtnValue(0)}}},[t._v("All")]),t._v(" "),t._l(t.games,function(e){return o("el-button",{key:e.gameid,attrs:{type:t.filterForm.gameId===e.gameid?"primary":""},on:{click:function(o){t.changeBtnValue(e.gameid)}}},[t._v("\n            "+t._s(e.gameName)+"("+t._s(e.onlineCount)+")\n          ")])})],2)],1),t._v(" "),o("el-form-item",[o("el-button",{staticClass:"btn-form",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.query}},[t._v("查询")])],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,size:"mini",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"昵称(玩家ID)"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"link-type",style:e.row.rechargeFlag>0?"color:red;":"",on:{click:function(o){t.handleClick(e.row.userid)}}},[t._v(t._s(e.row.nickName))]),t._v(" ("+t._s(e.row.showId)+")\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"房间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.roomName)+t._s(e.row.tableId)+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"身上金币",align:"center"}},[o("el-table-column",{attrs:{label:"银行金币",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("moneyFilter")(e.row.gold)))]),o("br"),t._v(" "),o("span",[t._v(t._s(t._f("moneyFilter")(e.row.bankGold)))])]}}])})],1),t._v(" "),o("el-table-column",{attrs:{label:"当日充值",align:"center"}},[o("el-table-column",{attrs:{label:"总充值",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{style:e.row.todayRechargeGold>0?"color:red;":"color:green;"},[t._v(t._s(e.row.todayRechargeGold))]),o("br"),t._v(" "),o("span",{style:e.row.totalRechargeGold>0?"color:red;":"color:green;"},[t._v(t._s(e.row.totalRechargeGold))])]}}])})],1),t._v(" "),o("el-table-column",{attrs:{label:"当日提现",align:"center"}},[o("el-table-column",{attrs:{label:"总提现",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{style:e.row.todayWithdrawGold>0?"color:red;":"color:green;"},[t._v(t._s(e.row.todayWithdrawGold))]),o("br"),t._v(" "),o("span",{style:e.row.totalWithdrawGold>0?"color:red;":"color:green;"},[t._v(t._s(e.row.totalWithdrawGold))])]}}])})],1),t._v(" "),o("el-table-column",{attrs:{label:"当日输赢",align:"center"}},[o("el-table-column",{attrs:{label:"总输赢",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{style:e.row.todayWinningGold>0?"color:red;":"color:green;"},[t._v(t._s(t._f("moneyFilter")(e.row.todayWinningGold)))]),o("br"),t._v(" "),o("span",{style:e.row.totalWinningGold>0?"color:red;":"color:green;"},[t._v(t._s(t._f("moneyFilter")(e.row.totalWinningGold)))])]}}])})],1),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"玩家幸运值"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(100*e.row.luckyRatio?100*e.row.luckyRatio:0)+" %\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"登录IP",align:"center"}},[o("el-table-column",{attrs:{label:"归属地",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.ip))]),o("br"),t._v(" "),o("span",[t._v(t._s(e.row.ipAttr))])]}}])})],1),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){t.changeRatio(e.row)}}},[t._v("调整幸运值")])]}}])})],1),t._v(" "),o("div",{staticClass:"pagination-container"},[o("el-pagination",{attrs:{"current-page":t.filterForm.pageNo,"page-sizes":[10,20,30,50],"page-size":t.filterForm.pageSize,total:t.listTotal,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.$set(t.filterForm,"pageNo",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),o("el-dialog",{attrs:{visible:t.dialogNewOrEditVisible,title:"调整幸运值",width:"400px"},on:{"update:visible":function(e){t.dialogNewOrEditVisible=e}}},[o("el-form",{ref:"dialogForm",staticStyle:{"margin-left":"30px"},attrs:{model:t.formData,rules:t.dialogRules,"label-position":"left","label-width":"80px"}},[t.controlGames.some(function(e){return Math.floor(t.formData.room/100)===e})?t._e():o("el-form-item",{attrs:{label:"幸运值",prop:"luckyRatio"}},[o("el-input",{model:{value:t.formData.luckyRatio,callback:function(e){t.$set(t.formData,"luckyRatio",e)},expression:"formData.luckyRatio"}})],1),t._v(" "),t.controlGames.some(function(e){return Math.floor(t.formData.room/100)===e})?o("el-form-item",{attrs:{label:"幸运值",prop:"luckyRatio"}},[o("el-radio-group",{model:{value:t.formData.luckyRatio,callback:function(e){t.$set(t.formData,"luckyRatio",e)},expression:"formData.luckyRatio"}},[o("el-radio",{attrs:{label:1}},[t._v("正常模式")]),t._v(" "),o("el-radio",{attrs:{label:0}},[t._v("必杀模式")])],1)],1):t._e()],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogNewOrEditVisible=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{loading:t.saveBtnLoading,type:"primary"},on:{click:t.saveData}},[t._v("保存")])],1)],1)],1)},[],!1,null,"f7270836",null);r.options.__file="index.vue";e.default=r.exports}}]);