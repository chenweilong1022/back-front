(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a2ef"],{"0lYy":function(t,o,n){},aFNf:function(t,o,n){var e=n("c01Q"),r=e.JSON||(e.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},ohTC:function(t,o,n){"use strict";n.r(o);var e=n("omC7"),r=n.n(e),i={name:"RobotManage",filters:{moneyFilter:function(t){return t?(t/100).toFixed(2):(0).toFixed(2)}},data:function(){return{rooms:[],bys:[145,148],others:[127],filterForm:{roomId:null},byForm:{gold:{min:null,max:null},time:{min:null,max:null},logic:"dtdw_dntg",num:{min:null,max:null},baseScore:null,cannonLevel:null},otherForm:{bet:{min:null,max:null},num:{min:null,max:null},win:{xianWin:null,zhuangWin:null,equal:null},zone:{zhuangDui:null,xianDui:null},minIdleSeat:{min:null,max:null},time:{min:null,max:null},gold:[{min:null,max:null},{min:null,max:null},{min:null,max:null}],logic:"bjl",debug:!0},robots:[]}},watch:{$route:"watchUrl"},mounted:function(){},methods:{operateFlag:function(){var t=[132,133];return console.log(!t.includes(this.filterForm.roomId/100)),console.log(this.filterForm.roomId/100),!t.includes(Math.floor(this.filterForm.roomId/100))},watchUrl:function(){var t=this.$loading({target:"#content",lock:!0,text:"拼命加载中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.5)"});this.filterForm.roomId=this.$route.name,this.queryRobots(t)},queryRoomIds:function(){var t=this;this.$store.dispatch("ListGameRoomByQry",{}).then(function(o){t.rooms=o.data,t.filterForm.roomId=t.rooms[0].roomid,t.queryConfig()})},queryConfig:function(){var t=this,o=this.$loading({target:"#content",lock:!0,text:"拼命加载中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.5)"});this.$store.dispatch("GetRobotConfigByQry",this.filterForm.roomId).then(function(n){var e=n.data;e&&(t.bys.some(function(t){return t===Math.floor(e.roomId/100)})?t.byForm=JSON.parse(e.config):t.others.some(function(t){return t===Math.floor(e.roomId/100)})&&(t.otherForm=JSON.parse(e.config))),t.queryRobots(o)}).catch(function(){return o.close()})},queryRobots:function(t){var o=this;this.$store.dispatch("GetRobotsByQry",this.filterForm.roomId).then(function(n){var e=n.data,r=[];e&&e.forEach(function(t){Array.isArray(t)&&t.forEach(function(t){r=r.concat(t)})}),o.robots=r,t.close()}).catch(function(){return t.close()})},saveData:function(t){var o=this;this.$confirm("此操作将更新机器人配置，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){switch(t){case"other":o.saveAction(o.otherForm);break;case"by":o.saveAction(o.byForm)}})},addRobot:function(){var t=this;this.$prompt("此操作将添加机器人，请输入桌号","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(o){var n=o.value;if(!n||isNaN(Number(n))||Number(n)<0)return t.$message({message:"请输入合法的桌号",type:"error"}),!1;t.$store.dispatch("AddRobot",{roomId:t.filterForm.roomId,tableId:n}).then(function(o){t.$message({message:o.msg,type:"success"}),t.queryConfig()})})},resetRobot:function(t){var o=this;this.$confirm("此操作将重置机器人，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){o.$store.dispatch("ResetRobot",{roomId:o.filterForm.roomId,uid:t}).then(function(t){o.$message({message:t.msg,type:"success"}),o.queryConfig()})})},delRobot:function(t){var o=this;this.$confirm("此操作将删除机器人，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){o.$store.dispatch("DeleteRobot",{roomId:o.filterForm.roomId,tableId:t.tableid,uid:t.uid}).then(function(t){o.$message({message:t.msg,type:"success"}),o.queryConfig()})})},saveAction:function(t){var o=this;this.$store.dispatch("UpdateRobotConfig",{roomId:this.filterForm.roomId,config:r()(t)}).then(function(t){o.$message({message:t.msg,type:"success"}),o.queryConfig()})}}},l=(n("scD1"),n("ZrdR")),a=Object(l.a)(i,function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"app-container"},[n("el-row",{staticStyle:{"margin-top":"20px"},attrs:{id:"content"}},[n("el-card",{staticClass:"box-card-component"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("h2",[t._v("机器人列表"),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.addRobot}},[t._v("添加机器人")])],1)]),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-table",{attrs:{data:t.robots,size:"mini",border:"",fit:""}},[n("el-table-column",{attrs:{align:"center",label:"桌号/座位号"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v("\n              "+t._s(o.row.tableid)+" / "+t._s(o.row.seat)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"机器人ID"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v("\n              "+t._s(o.row.uid)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"机器人名称"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v("\n              "+t._s(o.row.name)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"身上金币"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v("\n              "+t._s(t._f("moneyFilter")(o.row.gold))+"\n            ")]}}])}),t._v(" "),t.operateFlag()?n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(o){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){t.resetRobot(o.row.uid)}}},[t._v("重置机器人")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){t.delRobot(o.row)}}},[t._v("删除机器人")])]}}])}):t._e()],1)],1)])],1)],1)},[],!1,null,"779ad079",null);a.options.__file="index.vue";o.default=a.exports},omC7:function(t,o,n){t.exports={default:n("aFNf"),__esModule:!0}},scD1:function(t,o,n){"use strict";var e=n("0lYy");n.n(e).a}}]);